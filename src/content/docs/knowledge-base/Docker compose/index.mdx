---
title: Overview
description: Learn how to use docker compose in ZaneOps
---

import {Steps, Aside} from '@astrojs/starlight/components';

> Introduced in [**v1.13.0**](/changelog/v113)

ZaneOps supports deploying multi-container applications from `docker-compose.yml` files, with built-in blue/green deployments, web routing, and more.

In ZaneOps, these are called **Compose Stacks**.


### How does it work ?

Under the hood, compose files are deployed as [Docker stacks](https://docs.docker.com/reference/cli/docker/stack/) via Docker Swarm, not plain `docker compose up`.

This is an important distinction: Swarm is what enables ZaneOps to orchestrate rolling blue/green deployments, whereas standard Docker Compose has no concept of that.


![Compose stack deployment logs](/images/deploy-compose-stack-logs.png)

---

### Ways to create a compose stack

There are three ways to create a compose stack in ZaneOps:

- **From a `docker-compose.yml` file**: paste your own compose file directly. [See below](#how-to-create-and-deploy-a-compose-stack).
- **From a curated template**: pick from ZaneOps' library of ready-to-deploy stacks (Postgres, Redis, WordPress, and more) to get a pre-filled compose file. [**Browse all templates â†—**](/templates).
   ![template list](/images/create-from-template-list.png)
   ![Deploy n8n](/images/deploy-n8n-on-zaneops.png)
- **From a Dokploy template** *(experimental)*: paste a base64-encoded Dokploy template and ZaneOps converts it to a native compose file automatically. [Learn more](./01-templates#dokploy-template-migration).
   ![Create dokploy template](/images/create-from-dokploy.png)

<Aside>
All compose stacks are backed by a `docker-compose.yml` file. The three creation methods differ only in how that file is initially populated. You can edit the compose file at any time after creation, regardless of how the stack was created.
</Aside>

---

### How to create and deploy a Compose Stack

<Steps>
1. In the ZaneOps dashboard go to your project and select **New > Compose Stack**
    ![Select new compose stack](/images/new-compose-stack.png)
2. Select **from docker-compose.yml**
    ![Create from docker-compose.yml](/images/create-from-compose-yml.png)
3. Paste your compose file
    ![Paste docker-compose.yml](/images/paste-compose-yml.png)
4. Click **Create** and  **Deploy**
    ![Deploy compose stack](/images/deploy-compose-stack.png)
5. Your services are now running
    ![Docker compose service list](/images/docker-compose-service-list.png)
</Steps>

---

### Compose file syntax

ZaneOps adds some flavor on top of the normal compose file.

- **Template expressions** for generating secrets, domains, and service aliases
  ```yaml title="docker-compose.yml"
  x-zane-env:
    DB_PASSWORD: "{{ generate_password | 32 }}"
    DB_NAME: "{{ generate_slug }}"

  services:
    db:
      image: postgres:16
      environment:
        POSTGRES_PASSWORD: ${DB_PASSWORD}
        POSTGRES_DB: ${DB_NAME}
  ```
- **Label-based routing** instead of port mappings for exposing services to the web
  ```yaml title="docker-compose.yml"
  services:
    web:
      image: nginx:alpine
      deploy:
        labels:
          zane.http.routes.0.domain: "myapp.com"
          zane.http.routes.0.port: "80"
  ```
- **Variable interpolation** using `${VAR}` syntax in env vars and configs
- **Config versioning** for inline configuration files

See the [Compose file syntax reference](./02-compose-file-reference) for the full details.
